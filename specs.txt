# üìã SP√âCIFICATIONS PROJET BABYCHECK
## Application mobile de suivi de croissance des b√©b√©s

---

## üéØ INFORMATIONS G√âN√âRALES

**Nom du projet:** BabyCheck  
**Type:** Application mobile React Native + API Laravel  
**Dur√©e:** 7 jours (Jour 2/7 termin√©)  
**Statut actuel:** ‚úÖ Authentification compl√®te fonctionnelle

---

## üíª ENVIRONNEMENT DE D√âVELOPPEMENT

### Syst√®me d'exploitation
- **OS:** Windows
- **Serveur local:** XAMPP (PHP 8.2.12)
- **Base de donn√©es:** MySQL (baby_growth_db)

### R√©seau de d√©veloppement
- **IP locale:** 192.168.1.162
- **Port Laravel:** 8000
- **URL API:** http://192.168.1.162:8000/api

### Outils install√©s
- ‚úÖ PHP 8.2.12 (via XAMPP, ajout√© au PATH)
- ‚úÖ Composer (gestionnaire de paquets PHP)
- ‚úÖ Node.js (pour React Native)
- ‚úÖ Expo CLI (d√©veloppement React Native)
- ‚úÖ Git Bash (contr√¥le de version)

---

## üîß BACKEND - LARAVEL

### Configuration
- **Version:** Laravel 12
- **Dossier:** `baby-growth-backend/`
- **Commande de d√©marrage:** `php artisan serve --host=0.0.0.0 --port=8000`

### Base de donn√©es - Structure
**Nom:** baby_growth_db

**Tables cr√©√©es (10 migrations):**
1. `users` - Utilisateurs de l'application
2. `personal_access_tokens` - Tokens Sanctum (authentification API)
3. `babies` - Informations des b√©b√©s
4. `growth_records` - Historique poids/taille
5. `vaccinations` - Calendrier vaccinal
6. `milestones` - √âtapes de d√©veloppement
7. `appointments` - Rendez-vous p√©diatre
8. `food_introductions` - Alimentation

### API Routes (routes/api.php)
```
GET  /api/test                 - Test connexion API
POST /api/register             - Inscription utilisateur
POST /api/login                - Connexion utilisateur
POST /api/logout               - D√©connexion (prot√©g√©)
GET  /api/user                 - Infos utilisateur (prot√©g√©)
GET  /api/protected-test       - Test route prot√©g√©e (prot√©g√©)
```

### Authentification
- **Type:** Token-based avec Laravel Sanctum
- **Middleware:** `auth:sanctum` pour routes prot√©g√©es
- **Contr√¥leur:** `App\Http\Controllers\Api\AuthController`

### D√©pendances Laravel principales
```json
{
  "laravel/framework": "^12.0",
  "laravel/sanctum": "^4.0"
}
```

---

## üì± FRONTEND - REACT NATIVE

### Configuration
- **Framework:** React Native avec Expo
- **Version Expo:** SDK 54
- **React Native:** 0.81.5
- **Dossier:** `baby-growth-app/`
- **Commande de d√©marrage:** `npx expo start`

### Structure des dossiers
```
baby-growth-app/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ screens/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LoginScreen.js          ‚úÖ Termin√©
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RegisterScreen.js       ‚úÖ Termin√©
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DashboardScreen.js      ‚úÖ Termin√©
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TestConnectionScreen.js (Diagnostic)
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.js                  ‚úÖ Configuration Axios
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.js                 ‚úÖ Service authentification
‚îÇ   ‚îî‚îÄ‚îÄ navigation/
‚îú‚îÄ‚îÄ App.js                          ‚úÖ Navigation configur√©e
‚îî‚îÄ‚îÄ package.json
```

### D√©pendances React Native
```json
{
  "dependencies": {
    "expo": "~54.0.0",
    "react": "18.3.1",
    "react-native": "0.81.5",
    
    // Navigation
    "@react-navigation/native": "^6.1.9",
    "@react-navigation/stack": "^6.3.20",
    "react-native-screens": "~3.x.x",
    "react-native-safe-area-context": "~4.x.x",
    "react-native-gesture-handler": "~2.x.x",
    
    // HTTP & Storage
    "axios": "^1.6.0",
    "@react-native-async-storage/async-storage": "^1.21.0"
  }
}
```

### Configuration API (src/services/api.js)
- **Base URL:** http://192.168.1.162:8000/api
- **Timeout:** 15 secondes
- **Headers:** Accept: application/json, Content-Type: application/json
- **Intercepteurs:** Gestion automatique des tokens et erreurs 401

### √âcrans impl√©ment√©s

#### LoginScreen.js ‚úÖ
- Validation email/mot de passe
- Appel API `POST /login`
- Sauvegarde token + user dans AsyncStorage
- Navigation vers Dashboard apr√®s succ√®s

#### RegisterScreen.js ‚úÖ
- Validation formulaire complet
- Validation mot de passe (8+ caract√®res, confirmation)
- Appel API `POST /register`
- Gestion erreurs Laravel
- Navigation vers Dashboard apr√®s succ√®s

#### DashboardScreen.js ‚úÖ
- Affichage nom et email de l'utilisateur
- Section "Mes b√©b√©s" (vide pour l'instant)
- Bouton d√©connexion avec confirmation
- Suppression token + redirection Login

---

## üîê AUTHENTIFICATION - FLOW COMPLET

### Inscription
1. User remplit formulaire ‚Üí `RegisterScreen.js`
2. Validation frontend (email, password)
3. `authService.register()` ‚Üí `POST /api/register`
4. Laravel cr√©e user + g√©n√®re token Sanctum
5. Token + user sauvegard√©s dans AsyncStorage
6. Redirection vers Dashboard

### Connexion
1. User entre email/password ‚Üí `LoginScreen.js`
2. `authService.login()` ‚Üí `POST /api/login`
3. Laravel v√©rifie credentials + g√©n√®re token
4. Token + user sauvegard√©s
5. Redirection vers Dashboard

### D√©connexion
1. User clique "D√©connexion" ‚Üí `DashboardScreen.js`
2. Confirmation Alert
3. `authService.logout()` ‚Üí `POST /api/logout`
4. Suppression AsyncStorage (@auth_token, @auth_user)
5. Suppression header Authorization d'Axios
6. Redirection vers Login

---

## üêõ PROBL√àMES R√âSOLUS

### Session actuelle (Jour 2)

**Probl√®me 1: React Navigation v7 incompatible**
- **Erreur:** `java.lang.String cannot be cast to java.lang.Boolean`
- **Solution:** Downgrade vers React Navigation v6
- **Commandes:**
  ```bash
  npm uninstall @react-navigation/native @react-navigation/stack
  npm install @react-navigation/native@^6.1.9 @react-navigation/stack@^6.3.20
  ```

**Probl√®me 2: Network Error avec Axios**
- **Erreur:** Axios ne pouvait pas joindre Laravel depuis t√©l√©phone
- **Diagnostic:** Test avec Fetch natif ‚Üí fonctionnel
- **Cause:** Configuration Axios incorrecte
- **Solution:** 
  - Import AsyncStorage manquant dans `api.js`
  - URL de base corrig√©e avec `/api`
  - Meilleurs intercepteurs avec logs d√©taill√©s

**Probl√®me 3: Pare-feu Windows bloquait connexions**
- **Solution:** R√®gle pare-feu ajout√©e pour port 8000
  ```bash
  netsh advfirewall firewall add rule name="Laravel" dir=in action=allow protocol=TCP localport=8000
  ```

### Sessions pr√©c√©dentes (Jour 1)

**Probl√®me 1: PHP non reconnu**
- **Solution:** Ajout PHP au PATH syst√®me Windows

**Probl√®me 2: Extension Zip manquante**
- **Solution:** Activation dans php.ini

**Probl√®me 3: Routes API 404**
- **Solution:** Correction RouteServiceProvider.php

**Probl√®me 4: APP_KEY manquante**
- **Solution:** `php artisan key:generate`

**Probl√®me 5: Sanctum non configur√©**
- **Solution:** Ajout `HasApiTokens` dans User.php

---

## üìä FONCTIONNALIT√âS IMPL√âMENT√âES

### ‚úÖ Termin√© (Jour 1-2)
- [x] Installation environnement complet (Laravel + React Native)
- [x] Configuration base de donn√©es MySQL
- [x] Cr√©ation de 10 migrations (structure DB compl√®te)
- [x] API Laravel avec Sanctum
- [x] Routes API d'authentification
- [x] Configuration r√©seau (pare-feu + IP locale)
- [x] Navigation React Native v6
- [x] √âcrans Login + Register + Dashboard
- [x] Service d'authentification complet
- [x] Gestion tokens avec AsyncStorage
- [x] Intercepteurs Axios pour auth automatique
- [x] Gestion erreurs r√©seau + validation

---

## üéØ FONCTIONNALIT√âS √Ä D√âVELOPPER (Jours 3-7)

### Priorit√© 1 - Gestion des b√©b√©s (Jour 3)
- [ ] √âcran "Ajouter un b√©b√©" (formulaire)
- [ ] API Laravel: CRUD b√©b√©s (routes + contr√¥leur)
- [ ] Liste des b√©b√©s dans Dashboard
- [ ] √âcran d√©tails d'un b√©b√©
- [ ] Modifier/Supprimer un b√©b√©

### Priorit√© 2 - Suivi de croissance (Jour 4)
- [ ] Formulaire ajout poids/taille
- [ ] API: Enregistrement growth_records
- [ ] Historique des mesures
- [ ] Graphique de croissance (react-native-chart-kit)
- [ ] Comparaison courbes OMS (optionnel)

### Priorit√© 3 - Vaccinations (Jour 5)
- [ ] Liste vaccins recommand√©s (JSON statique ou DB)
- [ ] API: CRUD vaccinations
- [ ] Marquer vaccin comme "fait" avec date
- [ ] Notifications rappels (optionnel)

### Priorit√© 4 - Rendez-vous p√©diatre (Jour 5)
- [ ] Formulaire ajout rendez-vous
- [ ] API: CRUD appointments
- [ ] Liste rendez-vous (√† venir / pass√©s)
- [ ] Filtres et tri

### Priorit√© 5 - Alimentation (Jour 6)
- [ ] Liste aliments par √¢ge recommand√©
- [ ] API: CRUD food_introductions
- [ ] Marquer aliment comme "introduit"
- [ ] Suivi r√©actions allergiques (optionnel)

### Priorit√© 6 - √âtapes de d√©veloppement (Jour 6)
- [ ] Milestones par mois (sourire, marche, etc.)
- [ ] API: CRUD milestones
- [ ] Marquer √©tapes accomplies

### Priorit√© 7 - Finitions (Jour 7)
- [ ] Design UI/UX professionnel
- [ ] Ic√¥nes (react-native-vector-icons)
- [ ] Animations (react-native-reanimated)
- [ ] Gestion erreurs globale
- [ ] √âcrans de chargement
- [ ] Notifications locales (expo-notifications)
- [ ] Tests complets
- [ ] Documentation utilisateur
- [ ] Pr√©paration d√©mo/pr√©sentation

---

## üé® DESIGN & UX

### Palette de couleurs
- **Primaire:** #3498db (Bleu)
- **Secondaire:** #2ecc71 (Vert)
- **Danger:** #e74c3c (Rouge)
- **Texte principal:** #2c3e50
- **Texte secondaire:** #7f8c8d
- **Arri√®re-plan:** #f8f9fa
- **Blanc:** #ffffff

### Typographie
- **Titres:** 24-32px, bold
- **Sous-titres:** 16-20px, semi-bold
- **Corps:** 14-16px, regular
- **Petits textes:** 12px

---

## üîó URLS IMPORTANTES

### D√©veloppement
- **API Laravel:** http://192.168.1.162:8000/api
- **Test API:** http://192.168.1.162:8000/api/test
- **phpMyAdmin:** http://localhost/phpmyadmin
- **Expo DevTools:** http://localhost:19002

### Documentation
- **Laravel:** https://laravel.com/docs
- **Sanctum:** https://laravel.com/docs/sanctum
- **React Navigation:** https://reactnavigation.org/docs/getting-started
- **Expo:** https://docs.expo.dev

---

## üìù NOTES TECHNIQUES

### Configuration pare-feu (Important pour tests mobile)
```bash
# Ajouter r√®gle pour Laravel
netsh advfirewall firewall add rule name="Laravel Dev Server" dir=in action=allow protocol=TCP localport=8000
```

### Commandes utiles

**Laravel:**
```bash
php artisan serve --host=0.0.0.0 --port=8000  # D√©marrer serveur
php artisan migrate                            # Ex√©cuter migrations
php artisan route:list                         # Lister routes
php artisan tinker                             # Console interactive
```

**React Native:**
```bash
npx expo start                    # D√©marrer app
npx expo start -c                 # Avec nettoyage cache
npm install                       # Installer d√©pendances
```

**Git:**
```bash
git init                          # Initialiser repo
git add .                         # Ajouter tous fichiers
git commit -m "message"           # Commit
git push origin main              # Pousser vers GitHub
```

---

## ‚ö†Ô∏è POINTS D'ATTENTION

### S√©curit√©
- ‚ùó Ne jamais commiter `.env` (contient APP_KEY, DB_PASSWORD)
- ‚ùó Tokens Sanctum expiration (d√©faut: jamais, configurer si prod)
- ‚ùó Validation c√¥t√© serveur obligatoire (ne pas faire confiance au frontend)

### Performance
- Paginer les listes (b√©b√©s, rendez-vous, etc.)
- Optimiser requ√™tes SQL (eager loading Laravel)
- Cache images (react-native-fast-image si besoin)

### Tests
- Tester sur connexion lente (throttle dans DevTools)
- Tester avec plusieurs b√©b√©s (cas limites)
- V√©rifier comportement hors ligne

---

## üì¶ FICHIERS √Ä NE PAS COMMITER

### Backend (Laravel)
```
.env
/vendor/
/node_modules/
/storage/*.key
/public/storage
```

### Frontend (React Native)
```
node_modules/
.expo/
.expo-shared/
npm-debug.log
yarn-error.log
```

---

## üéØ OBJECTIFS PAR JOUR (Planning r√©vis√©)

- **Jour 1-2 (‚úÖ Termin√©):** Setup complet + Authentification
- **Jour 3:** CRUD B√©b√©s + Navigation d√©taill√©e
- **Jour 4:** Suivi croissance + Graphiques
- **Jour 5:** Vaccinations + Rendez-vous
- **Jour 6:** Alimentation + Milestones + Design
- **Jour 7:** Tests + Finitions + D√©mo

---

## üìû CONTACT & SUPPORT

**Outils de debug:**
- Metro Bundler (logs React Native)
- Laravel logs: `storage/logs/laravel.log`
- Chrome DevTools (Elements, Network)
- React Native Debugger

**Commandes de debug:**
```bash
# Voir logs Laravel en temps r√©el
tail -f storage/logs/laravel.log

# Nettoyer cache React Native
npx expo start -c

# Reset base de donn√©es
php artisan migrate:fresh
```

---

**Derni√®re mise √† jour:** 13 d√©cembre 2024 - 22:48  
**Version:** 2.0 (Post-authentification fonctionnelle)  
**Statut:** üü¢ En d√©veloppement actif